"use strict";(self.webpackChunkstreamx_website=self.webpackChunkstreamx_website||[]).push([[609],{3905:function(e,n,a){a.d(n,{Zo:function(){return s},kt:function(){return k}});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function l(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=t.createContext({}),p=function(e){var n=t.useContext(m),a=n;return e&&(a="function"==typeof e?e(n):l(l({},n),e)),a},s=function(e){var n=p(e.components);return t.createElement(m.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,m=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),c=p(a),k=r,u=c["".concat(m,".").concat(k)]||c[k]||d[k]||i;return a?t.createElement(u,l(l({ref:n},s),{},{components:a})):t.createElement(u,l({ref:n},s))}));function k(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var m in n)hasOwnProperty.call(n,m)&&(o[m]=n[m]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return t.createElement.apply(null,l)}return t.createElement.apply(null,a)}c.displayName="MDXCreateElement"},8215:function(e,n,a){var t=a(7294);n.Z=function(e){var n=e.children,a=e.hidden,r=e.className;return t.createElement("div",{role:"tabpanel",hidden:a,className:r},n)}},6396:function(e,n,a){a.d(n,{Z:function(){return c}});var t=a(7462),r=a(7294),i=a(2389),l=a(9443);var o=function(){var e=(0,r.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},m=a(3616),p=a(6010),s="tabItem_vU9c";function d(e){var n,a,i,l=e.lazy,d=e.block,c=e.defaultValue,k=e.values,u=e.groupId,v=e.className,g=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),N=null!=k?k:g.map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes}})),f=(0,m.lx)(N,(function(e,n){return e.value===n.value}));if(f.length>0)throw new Error('Docusaurus error: Duplicate values "'+f.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var C=null===c?c:null!=(n=null!=c?c:null==(a=g.find((function(e){return e.props.default})))?void 0:a.props.value)?n:null==(i=g[0])?void 0:i.props.value;if(null!==C&&!N.some((function(e){return e.value===C})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+C+'" but none of its children has the corresponding value. Available values are: '+N.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var b=o(),h=b.tabGroupChoices,S=b.setTabGroupChoices,T=(0,r.useState)(C),x=T[0],E=T[1],y=[],w=(0,m.o5)().blockElementScrollPositionUntilNextRender;if(null!=u){var F=h[u];null!=F&&F!==x&&N.some((function(e){return e.value===F}))&&E(F)}var P=function(e){var n=e.currentTarget,a=y.indexOf(n),t=N[a].value;t!==x&&(w(n),E(t),null!=u&&S(u,t))},I=function(e){var n,a=null;switch(e.key){case"ArrowRight":var t=y.indexOf(e.currentTarget)+1;a=y[t]||y[0];break;case"ArrowLeft":var r=y.indexOf(e.currentTarget)-1;a=y[r]||y[y.length-1]}null==(n=a)||n.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,p.Z)("tabs",{"tabs--block":d},v)},N.map((function(e){var n=e.value,a=e.label,i=e.attributes;return r.createElement("li",(0,t.Z)({role:"tab",tabIndex:x===n?0:-1,"aria-selected":x===n,key:n,ref:function(e){return y.push(e)},onKeyDown:I,onFocus:P,onClick:P},i,{className:(0,p.Z)("tabs__item",s,null==i?void 0:i.className,{"tabs__item--active":x===n})}),null!=a?a:n)}))),l?(0,r.cloneElement)(g.filter((function(e){return e.props.value===x}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},g.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==x})}))))}function c(e){var n=(0,i.Z)();return r.createElement(d,(0,t.Z)({key:String(n)},e))}},4502:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return p},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return c},default:function(){return u}});var t=a(7462),r=a(3366),i=(a(7294),a(3905)),l=a(6396),o=a(8215),m=["components"],p={id:"dev-model",title:"\u7f16\u7a0b\u6a21\u578b",sidebar_position:1},s=void 0,d={unversionedId:"development/dev-model",id:"development/dev-model",title:"\u7f16\u7a0b\u6a21\u578b",description:"\u4efb\u4f55\u6846\u67b6\u90fd\u6709\u4e00\u4e9b\u8981\u9075\u5faa\u7684\u89c4\u5219\u548c\u7ea6\u5b9a, \u6211\u4eec\u53ea\u6709\u9075\u5faa\u5e76\u638c\u63e1\u4e86\u8fd9\u4e9b\u89c4\u5219, \u624d\u80fd\u66f4\u52a0\u6e38\u5203\u6709\u4f59\u7684\u4f7f\u7528, \u4f7f\u5176\u53d1\u6325\u4e8b\u534a\u529f\u500d\u7684\u6548\u679c, \u6211\u4eec\u5f00\u53d1 Flink \u4f5c\u4e1a,\u5176\u5b9e\u5c31\u662f\u5229\u7528 Flink \u63d0\u4f9b\u7684 API , \u6309\u7167 Flink \u8981\u6c42\u7684\u5f00\u53d1\u65b9\u5f0f, \u5199\u4e00\u4e2a\u53ef\u4ee5\u6267\u884c\u7684(\u5fc5\u987b\u6709main()\u51fd\u6570)\u7684\u7a0b\u5e8f, \u5728\u7a0b\u5e8f\u91cc\u63a5\u5165\u5404\u79cdConnector\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684\u7b97\u5b50\u64cd\u4f5c, \u6700\u7ec8\u5c06\u6570\u636e\u901a\u8fc7Connector sink \u5230\u76ee\u6807\u5b58\u50a8,",source:"@site/docs/development/model.md",sourceDirName:"development",slug:"/development/dev-model",permalink:"/zh-CN/docs/development/dev-model",editUrl:"https://github.com/streamxhub/streamx-website/edit/dev/docs/development/model.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"dev-model",title:"\u7f16\u7a0b\u6a21\u578b",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"\u5f00\u53d1\u73af\u5883",permalink:"/zh-CN/docs/user-guide/development"},next:{title:"\u9879\u76ee\u914d\u7f6e",permalink:"/zh-CN/docs/development/config"}},c=[{value:"\u67b6\u6784",id:"\u67b6\u6784",children:[],level:2},{value:"\u7f16\u7a0b\u6a21\u578b",id:"\u7f16\u7a0b\u6a21\u578b",children:[{value:"DataStream",id:"datastream",children:[],level:3},{value:"Flink Sql",id:"flink-sql",children:[{value:"TableEnvironment",id:"tableenvironment",children:[],level:4},{value:"StreamTableEnvironment",id:"streamtableenvironment",children:[],level:4}],level:3}],level:2},{value:"RunTime Context",id:"runtime-context",children:[{value:"StreamingContext",id:"streamingcontext",children:[],level:3},{value:"TableContext",id:"tablecontext",children:[],level:3},{value:"StreamTableContext",id:"streamtablecontext",children:[],level:3}],level:2},{value:"\u751f\u547d\u5468\u671f",id:"\u751f\u547d\u5468\u671f",children:[{value:"\u751f\u547d\u5468\u671f\u4e4b \u2014 init",id:"\u751f\u547d\u5468\u671f\u4e4b--init",children:[],level:3},{value:"\u751f\u547d\u5468\u671f\u4e4b \u2014 config",id:"\u751f\u547d\u5468\u671f\u4e4b--config",children:[],level:3},{value:"\u751f\u547d\u5468\u671f\u4e4b \u2014 ready",id:"\u751f\u547d\u5468\u671f\u4e4b--ready",children:[],level:3},{value:"\u751f\u547d\u5468\u671f\u4e4b \u2014 handle",id:"\u751f\u547d\u5468\u671f\u4e4b--handle",children:[],level:3},{value:"\u751f\u547d\u5468\u671f\u4e4b \u2014 start",id:"\u751f\u547d\u5468\u671f\u4e4b--start",children:[],level:3},{value:"\u751f\u547d\u5468\u671f\u4e4b \u2014 destroy",id:"\u751f\u547d\u5468\u671f\u4e4b--destroy",children:[],level:3}],level:2},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",children:[],level:2},{value:"\u6253\u5305\u90e8\u7f72",id:"\u6253\u5305\u90e8\u7f72",children:[],level:2},{value:"\u542f\u52a8\u547d\u4ee4",id:"\u542f\u52a8\u547d\u4ee4",children:[],level:2}],k={toc:c};function u(e){var n=e.components,p=(0,r.Z)(e,m);return(0,i.kt)("wrapper",(0,t.Z)({},k,p,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\u4efb\u4f55\u6846\u67b6\u90fd\u6709\u4e00\u4e9b\u8981\u9075\u5faa\u7684\u89c4\u5219\u548c\u7ea6\u5b9a, \u6211\u4eec\u53ea\u6709\u9075\u5faa\u5e76\u638c\u63e1\u4e86\u8fd9\u4e9b\u89c4\u5219, \u624d\u80fd\u66f4\u52a0\u6e38\u5203\u6709\u4f59\u7684\u4f7f\u7528, \u4f7f\u5176\u53d1\u6325\u4e8b\u534a\u529f\u500d\u7684\u6548\u679c, \u6211\u4eec\u5f00\u53d1 Flink \u4f5c\u4e1a,\u5176\u5b9e\u5c31\u662f\u5229\u7528 Flink \u63d0\u4f9b\u7684 API , \u6309\u7167 Flink \u8981\u6c42\u7684\u5f00\u53d1\u65b9\u5f0f, \u5199\u4e00\u4e2a\u53ef\u4ee5\u6267\u884c\u7684(\u5fc5\u987b\u6709",(0,i.kt)("inlineCode",{parentName:"p"},"main()"),"\u51fd\u6570)\u7684\u7a0b\u5e8f, \u5728\u7a0b\u5e8f\u91cc\u63a5\u5165\u5404\u79cd",(0,i.kt)("inlineCode",{parentName:"p"},"Connector"),"\u7ecf\u8fc7\u4e00\u7cfb\u5217\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"\u7b97\u5b50"),"\u64cd\u4f5c, \u6700\u7ec8\u5c06\u6570\u636e\u901a\u8fc7",(0,i.kt)("inlineCode",{parentName:"p"},"Connector")," sink \u5230\u76ee\u6807\u5b58\u50a8,\n\u6211\u4eec\u628a\u8fd9\u79cd\u6309\u7167\u67d0\u79cd\u7ea6\u5b9a\u7684\u89c4\u5219\u53bb\u9010\u6b65\u7f16\u7a0b\u7684\u65b9\u5f0f\u79f0\u4e4b\u4e3a",(0,i.kt)("inlineCode",{parentName:"p"},"\u7f16\u7a0b\u6a21\u578b"),", \u8fd9\u4e00\u7ae0\u8282\u6211\u4eec\u5c31\u6765\u804a\u804a StreamX \u7684",(0,i.kt)("inlineCode",{parentName:"p"},"\u7f16\u7a0b\u6a21\u578b"),"\u4ee5\u53ca\u5f00\u53d1\u6ce8\u610f\u4e8b\u9879"),(0,i.kt)("p",null,"\u6211\u4eec\u4ece\u8fd9\u51e0\u4e2a\u65b9\u9762\u5f00\u59cb\u5165\u624b"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u67b6\u6784"),(0,i.kt)("li",{parentName:"ul"},"\u7f16\u7a0b\u6a21\u578b"),(0,i.kt)("li",{parentName:"ul"},"RunTime Context"),(0,i.kt)("li",{parentName:"ul"},"\u751f\u547d\u5468\u671f"),(0,i.kt)("li",{parentName:"ul"},"\u76ee\u5f55\u7ed3\u6784"),(0,i.kt)("li",{parentName:"ul"},"\u6253\u5305\u90e8\u7f72")),(0,i.kt)("h2",{id:"\u67b6\u6784"},"\u67b6\u6784"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"%22/doc/image/streamx_archite.png%22"})),(0,i.kt)("h2",{id:"\u7f16\u7a0b\u6a21\u578b"},"\u7f16\u7a0b\u6a21\u578b"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"streamx-core")," \u5b9a\u4f4d\u662f\u7f16\u7a0b\u65f6\u6846\u67b6,\u5feb\u901f\u5f00\u53d1\u811a\u624b\u67b6,\u4e13\u95e8\u4e3a\u7b80\u5316 Flink \u5f00\u53d1\u800c\u751f,\u5f00\u53d1\u8005\u5728\u5f00\u53d1\u9636\u6bb5\u4f1a\u4f7f\u7528\u5230\u8be5\u6a21\u5757,\u4e0b\u9762\u6211\u4eec\u6765\u770b\u770b ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStrema")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"Flink Sql")," \u7528 StreamX \u6765\u5f00\u53d1\u7f16\u7a0b\u6a21\u578b\u662f\u4ec0\u4e48\u6837\u7684,\u6709\u4ec0\u4e48\u89c4\u8303\u548c\u8981\u6c42"),(0,i.kt)("h3",{id:"datastream"},"DataStream"),(0,i.kt)("p",null," StreamX \u63d0\u4f9b\u4e86",(0,i.kt)("inlineCode",{parentName:"p"},"scala"),"\u548c",(0,i.kt)("inlineCode",{parentName:"p"},"Java"),"\u4e24\u79cd API \u6765\u5f00\u53d1 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u7a0b\u5e8f,\u5177\u4f53\u4ee3\u7801\u5f00\u53d1\u5982\u4e0b"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"scala",label:"Scala",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"import com.streamxhub.streamx.flink.core.scala.FlinkStreaming\nimport org.apache.flink.api.scala._\n\nobject MyFlinkApp extends FlinkStreaming {\n\n    override def handle(): Unit = {\n        ...\n    }\n}\n"))),(0,i.kt)(o.Z,{value:"Java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public class MyFlinkJavaApp {\n\n    public static void main(String[] args) {\n        StreamEnvConfig JavaConfig = new StreamEnvConfig(args, (environment, parameterTool) -> {\n            //\u7528\u6237\u53ef\u4ee5\u7ed9environment\u8bbe\u7f6e\u53c2\u6570...\n            System.out.println("environment argument set...");\n        });\n        \n        StreamingContext context = new StreamingContext(JavaConfig);\n            \n        ....    \n\n        context.start();\n    }\n}\n')))),(0,i.kt)("p",null,"\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"scala")," API \u5f00\u53d1,\u7a0b\u5e8f\u5fc5\u987b\u8981\u7ee7\u627f ",(0,i.kt)("inlineCode",{parentName:"p"},"FlinkStreaming")," ,\u7ee7\u627f\u4e4b\u540e,\u4f1a\u5f3a\u5236\u8ba9\u5f00\u53d1\u8005\u5b9e\u73b0 ",(0,i.kt)("inlineCode",{parentName:"p"},"handle()")," \u65b9\u6cd5,\u8be5\u65b9\u6cd5\u5c31\u662f\u7528\u6237\u5199\u4ee3\u7801\u7684\u5165\u53e3, \u540c\u65f6 ",(0,i.kt)("inlineCode",{parentName:"p"},"streamingContext")," \u4f9b\u5f00\u53d1\u8005\u4f7f\u7528"),(0,i.kt)("p",null,"\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Java")," API \u5f00\u53d1\u7531\u4e8e\u8bed\u8a00\u672c\u8eab\u7684\u9650\u5236\u6ca1\u6cd5\u7701\u6389 ",(0,i.kt)("inlineCode",{parentName:"p"},"main()")," \u65b9\u6cd5,\u6240\u4ee5\u4f1a\u662f\u4e00\u4e2a\u6807\u51c6\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"main()")," \u51fd\u6570, \u9700\u8981\u7528\u6237\u624b\u52a8\u521b\u5efa ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext"),",",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u662f\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u7c7b,\u7a0d\u540e\u4f1a\u4ecb\u7ecd"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u4ee5\u4e0a\u51e0\u884c ",(0,i.kt)("inlineCode",{parentName:"p"},"scala")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"Java")," \u4ee3\u7801\u5c31\u662f\u7528 StreamX \u5f00\u53d1 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u5fc5\u4e0d\u53ef\u5c11\u7684\u6700\u57fa\u672c\u7684\u9aa8\u67b6\u4ee3\u7801,\u7528 StreamX \u5f00\u53d1 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u7a0b\u5e8f,\u4ece\u8fd9\u51e0\u884c\u4ee3\u7801\u5f00\u59cb, Java API \u5f00\u53d1\u9700\u8981\u5f00\u53d1\u8005\u624b\u52a8\u542f\u52a8\u4efb\u52a1 ",(0,i.kt)("inlineCode",{parentName:"p"},"start")))),(0,i.kt)("h3",{id:"flink-sql"},"Flink Sql"),(0,i.kt)("p",null,"TableEnvironment \u662f\u7528\u6765\u521b\u5efa Table & SQL \u7a0b\u5e8f\u7684\u4e0a\u4e0b\u6587\u6267\u884c\u73af\u5883,\u4e5f\u662f Table & SQL \u7a0b\u5e8f\u7684\u5165\u53e3,Table & SQL \u7a0b\u5e8f\u7684\u6240\u6709\u529f\u80fd\u90fd\u662f\u56f4\u7ed5 TableEnvironment \u8fd9\u4e2a\u6838\u5fc3\u7c7b\u5c55\u5f00\u7684\u3002TableEnvironment \u7684\u4e3b\u8981\u804c\u80fd\u5305\u62ec\uff1a\u5bf9\u63a5\u5916\u90e8\u7cfb\u7edf\uff0c\u8868\u53ca\u5143\u6570\u636e\u7684\u6ce8\u518c\u548c\u68c0\u7d22\uff0c\u6267\u884c SQL \u8bed\u53e5\uff0c\u63d0\u4f9b\u66f4\u8be6\u7ec6\u7684\u914d\u7f6e\u9009\u9879\u3002"),(0,i.kt)("p",null,"Flink \u793e\u533a\u4e00\u76f4\u5728\u63a8\u8fdb DataStream \u7684\u6279\u5904\u7406\u80fd\u529b,\u7edf\u4e00\u6d41\u6279\u4e00\u4f53,\u5728 Flink 1.12 \u4e2d\u6d41\u6279\u4e00\u4f53\u771f\u6b63\u7edf\u4e00\u8fd0\u884c,\u8bf8\u591a\u5386\u53f2 API \u5982: DataSet API, BatchTableEnvironment API \u7b49\u88ab\u5e9f\u5f03,\u9000\u51fa\u5386\u53f2\u821e\u53f0,\u5b98\u65b9\u63a8\u8350\u4f7f\u7528 ",(0,i.kt)("strong",{parentName:"p"},"TableEnvironment")," \u548c ",(0,i.kt)("strong",{parentName:"p"},"StreamTableEnvironment")),(0,i.kt)("p",null," StreamX \u9488\u5bf9 ",(0,i.kt)("strong",{parentName:"p"},"TableEnvironment")," \u548c ",(0,i.kt)("strong",{parentName:"p"},"StreamTableEnvironment")," \u8fd9\u4e24\u79cd\u73af\u5883\u7684\u5f00\u53d1,\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684\u66f4\u65b9\u4fbf\u5feb\u6377\u7684 API"),(0,i.kt)("h4",{id:"tableenvironment"},"TableEnvironment"),(0,i.kt)("p",null,"\u5f00\u53d1Table & SQL \u4f5c\u4e1a, TableEnvironment \u4f1a\u662f Flink \u63a8\u8350\u4f7f\u7528\u7684\u5165\u53e3\u7c7b, \u540c\u65f6\u80fd\u652f\u6301 Java API \u548c Scala API,\u4e0b\u9762\u7684\u4ee3\u7801\u6f14\u793a\u4e86\u5728 StreamX \u5982\u4f55\u5f00\u53d1\u4e00\u4e2a TableEnvironment \u7c7b\u578b\u7684\u4f5c\u4e1a"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"scala",label:"Scala",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"import com.streamxhub.streamx.flink.core.scala.FlinkTable\n\nobject TableApp extends FlinkTable {\n\n    override def handle(): Unit = {\n    ...\n    }\n\n}\n"))),(0,i.kt)(o.Z,{value:"Java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'import com.streamxhub.streamx.flink.core.scala.TableContext;\nimport com.streamxhub.streamx.flink.core.scala.util.TableEnvConfig;\n\npublic class JavaTableApp {\n\n    public static void main(String[] args) {\n        TableEnvConfig tableEnvConfig = new TableEnvConfig(args, null);\n        TableContext context = new TableContext(tableEnvConfig);\n        ...\n        context.start("Flink SQl Job");\n    }\n}\n')))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u4ee5\u4e0a\u51e0\u884c Scala \u548c Java \u4ee3\u7801\u5c31\u662f\u7528 StreamX \u5f00\u53d1 TableEnvironment \u5fc5\u4e0d\u53ef\u5c11\u7684\u6700\u57fa\u672c\u7684\u9aa8\u67b6\u4ee3\u7801,\u7528 StreamX \u5f00\u53d1 TableEnvironment \u7a0b\u5e8f,\u4ece\u8fd9\u51e0\u884c\u4ee3\u7801\u5f00\u59cb,\nScala API \u5fc5\u987b\u7ee7\u627f FlinkTable, Java API \u5f00\u53d1\u9700\u8981\u624b\u52a8\u6784\u9020 TableContext ,\u9700\u8981\u5f00\u53d1\u8005\u624b\u52a8\u542f\u52a8\u4efb\u52a1 ",(0,i.kt)("inlineCode",{parentName:"p"},"start")))),(0,i.kt)("h4",{id:"streamtableenvironment"},"StreamTableEnvironment"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u7528\u4e8e\u6d41\u8ba1\u7b97\u573a\u666f,\u6d41\u8ba1\u7b97\u7684\u5bf9\u8c61\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream"),"\u3002\u76f8\u6bd4 ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u63d0\u4f9b\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"Table")," \u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\u7684\u63a5\u53e3,\u5982\u679c\u7528\u6237\u7684\u7a0b\u5e8f\u9664\u4e86\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Table API")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL")," \u7f16\u5199\u5916,\u8fd8\u9700\u8981\u4f7f\u7528\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream API"),",\u5219\u9700\u8981\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment"),"\u3002\n\u4e0b\u9762\u7684\u4ee3\u7801\u6f14\u793a\u4e86\u5728 StreamX \u5982\u4f55\u5f00\u53d1\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u7c7b\u578b\u7684\u4f5c\u4e1a"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"scala",label:"Scala",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"package com.streamxhub.streamx.test.tablesql\n\nimport com.streamxhub.streamx.flink.core.scala.FlinkStreamTable\n\nobject StreamTableApp extends FlinkStreamTable {\n\n  override def handle(): Unit = {\n    ...\n  }\n  \n}\n"))),(0,i.kt)(o.Z,{value:"Java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'\nimport com.streamxhub.streamx.flink.core.scala.StreamTableContext;\nimport com.streamxhub.streamx.flink.core.scala.util.StreamTableEnvConfig;\n\npublic class JavaStreamTableApp {\n\n    public static void main(String[] args) {\n        StreamTableEnvConfig JavaConfig = new StreamTableEnvConfig(args, null, null);\n        StreamTableContext context = new StreamTableContext(JavaConfig);\n\n        ...\n\n        context.start("Flink SQl Job");\n    }\n}\n')))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u7279\u522b\u6ce8\u610f")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u4ee5\u4e0a\u51e0\u884c scala \u548c Java \u4ee3\u7801\u5c31\u662f\u7528 StreamX \u5f00\u53d1 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u5fc5\u4e0d\u53ef\u5c11\u7684\u6700\u57fa\u672c\u7684\u9aa8\u67b6\u4ee3\u7801,\u7528 StreamX \u5f00\u53d1 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u7a0b\u5e8f,\u4ece\u8fd9\u51e0\u884c\u4ee3\u7801\u5f00\u59cb,Java \u4ee3\u7801\u9700\u8981\u624b\u52a8\u6784\u9020 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext"),",",(0,i.kt)("inlineCode",{parentName:"p"},"Java API"),"\u5f00\u53d1\u9700\u8981\u5f00\u53d1\u8005\u624b\u52a8\u542f\u52a8\u4efb\u52a1",(0,i.kt)("inlineCode",{parentName:"p"},"start")))),(0,i.kt)("h2",{id:"runtime-context"},"RunTime Context"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"RunTime Context")," \u2014 ",(0,i.kt)("strong",{parentName:"p"},"StreamingContext")," , ",(0,i.kt)("strong",{parentName:"p"},"TableContext")," , ",(0,i.kt)("strong",{parentName:"p"},"StreamTableContext")," \u662f StreamX \u4e2d\u51e0\u4e2a\u975e\u5e38\u91cd\u8981\u4e09\u4e2a\u5bf9\u8c61,\u63a5\u4e0b\u6765\u6211\u4eec\u5177\u4f53\u770b\u770b\u8fd9\u4e09\u4e2a ",(0,i.kt)("strong",{parentName:"p"},"Context")," \u7684\u5b9a\u4e49\u548c\u4f5c\u7528"),(0,i.kt)("center",null,(0,i.kt)("img",{src:"/doc/image/streamx_coreapi.png",width:"60%"})),(0,i.kt)("h3",{id:"streamingcontext"},"StreamingContext"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u7ee7\u627f\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment"),", \u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment")," \u7684\u57fa\u7840\u4e4b\u4e0a\u589e\u52a0\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"ParameterTool")," ,\u7b80\u5355\u53ef\u4ee5\u7406\u89e3\u4e3a:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"StreamingContext")," = ",(0,i.kt)("strong",{parentName:"p"},"ParameterTool")," + ",(0,i.kt)("strong",{parentName:"p"},"StreamExecutionEnvironment")),(0,i.kt)("p",null,"\u5177\u4f53\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"class StreamingContext(val parameter: ParameterTool, private val environment: StreamExecutionEnvironment) \n    extends StreamExecutionEnvironment(environment.getJavaEnv) {\n\n  /**\n   * for scala\n   *\n   * @param args\n   */\n  def this(args: (ParameterTool, StreamExecutionEnvironment)) = this(args._1, args._2)\n\n  /**\n   * for Java\n   *\n   * @param args\n   */\n  def this(args: StreamEnvConfig) = this(FlinkStreamingInitializer.initJavaStream(args))\n  \n  ...  \n}  \n")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u7279\u522b\u6ce8\u610f")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u8fd9\u4e2a\u5bf9\u8c61\u975e\u5e38\u91cd\u8981,\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u4f5c\u4e1a\u4e2d\u4f1a\u8d2f\u7a7f\u6574\u4e2a\u4efb\u52a1\u7684\u751f\u547d\u5468\u671f, ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u672c\u8eab\u7ee7\u627f\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment")," ,\u914d\u7f6e\u6587\u4ef6\u4f1a\u5b8c\u5168\u878d\u5408\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u4e2d,\u8fd9\u6837\u5c31\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u4e2d\u83b7\u53d6\u5404\u79cd\u53c2\u6570"))),(0,i.kt)("p",null,"\u5728 StreamX \u4e2d, ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u4e5f\u662f Java API \u7f16\u5199 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u4f5c\u4e1a\u7684\u5165\u53e3\u7c7b, ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext")," \u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u6709\u4e00\u4e2a\u662f\u4e13\u95e8\u4e3a Java API \u6253\u9020\u7684,\u8be5\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"/**\n * for Java\n * @param args\n*/\ndef this(args: StreamEnvConfig) = this(FlinkStreamingInitializer.initJavaStream(args))\n")),(0,i.kt)("p",null,"\u7531\u4e0a\u9762\u7684\u6784\u9020\u65b9\u6cd5\u53ef\u4ee5\u770b\u5230\u521b\u5efa ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingContext"),",\u9700\u8981\u4f20\u5165\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamEnvConfig")," \u5bf9\u8c61, ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamEnvConfig")," \u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"class StreamEnvConfig(val args: Array[String], val conf: StreamEnvConfigFunction)\n")),(0,i.kt)("p",null,"StreamEnvConfig\u7684\u6784\u9020\u65b9\u6cd5\u4e2d,\u5176\u4e2d"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"args")," \u4e3a\u542f\u52a8\u53c2\u6570,\u5fc5\u987b\u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"main")," \u65b9\u6cd5\u91cc\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"args")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"conf")," \u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"StreamEnvConfigFunction")," \u7c7b\u578b\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"Function"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"StreamEnvConfigFunction")," \u5b9a\u4e49\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"@FunctionalInterface\npublic interface StreamEnvConfigFunction {\n    /**\n     * \u7528\u4e8e\u521d\u59cb\u5316StreamExecutionEnvironment\u7684\u65f6\u5019,\u7528\u4e8e\u53ef\u4ee5\u5b9e\u73b0\u8be5\u51fd\u6570,\u81ea\u5b9a\u4e49\u8981\u8bbe\u7f6e\u7684\u53c2\u6570...\n     *\n     * @param environment\n     * @param parameterTool\n     */\n    void configuration(StreamExecutionEnvironment environment, ParameterTool parameterTool);\n}\n")),(0,i.kt)("p",null,"\u8be5",(0,i.kt)("inlineCode",{parentName:"p"},"Function"),"\u7684\u4f5c\u7528\u662f\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u94a9\u5b50\u7684\u65b9\u5f0f\u8bbe\u7f6e\u66f4\u591a\u7684\u53c2\u6570,\u4f1a\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"parameter")," (\u89e3\u6790\u914d\u7f6e\u6587\u4ef6\u91cc\u6240\u6709\u7684\u53c2\u6570)\u548c\u521d\u59cb\u5316\u597d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment")," \u5bf9\u8c61\u4f20\u7ed9\u5f00\u53d1\u8005\u53bb\u5b8c\u6210\u66f4\u591a\u7684\u53c2\u6570\u8bbe\u7f6e,\u5982:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'StreamEnvConfig JavaConfig = new StreamEnvConfig(args, (environment, parameterTool) -> {\n    System.out.println("environment argument set...");\n    environment.getConfig().enableForceAvro();\n});\n\nStreamingContext context = new StreamingContext(JavaConfig);\n')),(0,i.kt)("h3",{id:"tablecontext"},"TableContext"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"TableContext")," \u7ee7\u627f\u81ea",(0,i.kt)("inlineCode",{parentName:"p"}," TableEnvironment")," ,\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment")," \u7684\u57fa\u7840\u4e4b\u4e0a\u589e\u52a0\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"ParameterTool")," ,\u7528\u6765\u521b\u5efa ",(0,i.kt)("inlineCode",{parentName:"p"},"Table")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"SQL")," \u7a0b\u5e8f\u7684\u4e0a\u4e0b\u6587\u6267\u884c\u73af\u5883,\u7b80\u5355\u53ef\u4ee5\u7406\u89e3\u4e3a:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"TableContext")," = ",(0,i.kt)("strong",{parentName:"p"},"ParameterTool")," + ",(0,i.kt)("strong",{parentName:"p"},"TableEnvironment")),(0,i.kt)("p",null,"\u5177\u4f53\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"class TableContext(val parameter: ParameterTool,\n                   private val tableEnv: TableEnvironment) \n                   extends TableEnvironment \n                   with FlinkTableTrait {\n\n  /**\n   * for scala\n   *\n   * @param args\n   */\n  def this(args: (ParameterTool, TableEnvironment)) = this(args._1, args._2)\n\n  /**\n   * for Java\n   * @param args\n   */\n  def this(args: TableEnvConfig) = this(FlinkTableInitializer.initJavaTable(args))\n  \n  ...\n}  \n")),(0,i.kt)("p",null,"\u5728 StreamX \u4e2d,",(0,i.kt)("inlineCode",{parentName:"p"},"TableContext")," \u4e5f\u662f Java API \u7f16\u5199 ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment")," \u7c7b\u578b\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Table Sql")," \u4f5c\u4e1a\u7684\u5165\u53e3\u7c7b,",(0,i.kt)("inlineCode",{parentName:"p"},"TableContext")," \u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u6709\u4e00\u4e2a\u662f\u4e13\u95e8\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"Java API")," \u6253\u9020\u7684,\u8be5\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"\n/**\n* for Java\n* @param args\n*/\ndef this(args: TableEnvConfig) = this(FlinkTableInitializer.initJavaTable(args))\n")),(0,i.kt)("p",null,"\u7531\u4e0a\u9762\u7684\u6784\u9020\u65b9\u6cd5\u53ef\u4ee5\u770b\u5230\u521b\u5efa ",(0,i.kt)("inlineCode",{parentName:"p"},"TableContext"),",\u9700\u8981\u4f20\u5165\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvConfig")," \u5bf9\u8c61, ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvConfig")," \u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"class TableEnvConfig(val args: Array[String], val conf: TableEnvConfigFunction)\n")),(0,i.kt)("p",null,"TableEnvConfig\u7684\u6784\u9020\u65b9\u6cd5\u4e2d,\u5176\u4e2d"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"args")," \u4e3a\u542f\u52a8\u53c2\u6570,\u5fc5\u987b\u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"main")," \u65b9\u6cd5\u91cc\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"args")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"conf")," \u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"TableEnvConfigFunction")," \u7c7b\u578b\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"Function"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvConfigFunction")," \u5b9a\u4e49\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"@FunctionalInterface\npublic interface TableEnvConfigFunction {\n    /**\n     * \u7528\u4e8e\u521d\u59cb\u5316TableEnvironment\u7684\u65f6\u5019,\u7528\u4e8e\u53ef\u4ee5\u5b9e\u73b0\u8be5\u51fd\u6570,\u81ea\u5b9a\u4e49\u8981\u8bbe\u7f6e\u7684\u53c2\u6570...\n     *\n     * @param tableConfig\n     * @param parameterTool\n     */\n    void configuration(TableConfig tableConfig, ParameterTool parameterTool);\n\n}\n")),(0,i.kt)("p",null,"\u8be5 ",(0,i.kt)("inlineCode",{parentName:"p"},"Function")," \u7684\u4f5c\u7528\u662f\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u94a9\u5b50\u7684\u65b9\u5f0f\u8bbe\u7f6e\u66f4\u591a\u7684\u53c2\u6570,\u4f1a\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"parameter"),"(\u89e3\u6790\u914d\u7f6e\u6587\u4ef6\u91cc\u6240\u6709\u7684\u53c2\u6570)\u548c\u521d\u59cb\u5316\u597d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment")," \u4e2d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"TableConfig")," \u5bf9\u8c61\u4f20\u7ed9\u5f00\u53d1\u8005\u53bb\u5b8c\u6210\u66f4\u591a\u7684\u53c2\u6570\u8bbe\u7f6e,\u5982:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'TableEnvConfig config = new TableEnvConfig(args,(tableConfig,parameterTool)->{\n    tableConfig.setLocalTimeZone(ZoneId.of("Asia/Shanghai"));\n});\nTableContext context = new TableContext(config);\n...\n')),(0,i.kt)("h3",{id:"streamtablecontext"},"StreamTableContext"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext")," \u7ee7\u627f\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment"),",\u7528\u4e8e\u6d41\u8ba1\u7b97\u573a\u666f,\u6d41\u8ba1\u7b97\u7684\u5bf9\u8c61\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream"),", \u76f8\u6bd4 ",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u63d0\u4f9b\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"Table")," \u4e4b\u95f4\u76f8\u4e92\u8f6c\u6362\u7684\u63a5\u53e3,\n",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext")," \u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u7684\u57fa\u7840\u4e4b\u4e0a\u589e\u52a0\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"ParameterTool"),",\u53c8\u76f4\u63a5\u63a5\u5165\u4e86 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u7684API,\u7b80\u5355\u53ef\u4ee5\u7406\u89e3\u4e3a:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"StreamTableContext")," = ",(0,i.kt)("strong",{parentName:"p"},"ParameterTool")," + ",(0,i.kt)("strong",{parentName:"p"},"StreamTableEnvironment")," + ",(0,i.kt)("strong",{parentName:"p"},"StreamExecutionEnvironment")),(0,i.kt)("p",null,"\u5177\u4f53\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"\nclass StreamTableContext(val parameter: ParameterTool,\n                         private val streamEnv: StreamExecutionEnvironment,\n                         private val tableEnv: StreamTableEnvironment) \n                         extends StreamTableEnvironment \n                         with FlinkTableTrait {\n\n  /**\n   * \u4e00\u65e6 Table \u88ab\u8f6c\u5316\u4e3a DataStream,\n   * \u5fc5\u987b\u4f7f\u7528 StreamExecutionEnvironment \u7684 execute \u65b9\u6cd5\u6267\u884c\u8be5 DataStream \u4f5c\u4e1a\u3002\n   */\n  private[scala] var isConvertedToDataStream: Boolean = false\n\n  /**\n   * for scala\n   *\n   * @param args\n   */\n  def this(args: (ParameterTool, StreamExecutionEnvironment, StreamTableEnvironment)) = \n  this(args._1, args._2, args._3)\n\n  /**\n   * for Java\n   *\n   * @param args\n   */\n  def this(args: StreamTableEnvConfig) = this(FlinkTableInitializer.initJavaStreamTable(args))\n  ...  \n}\n")),(0,i.kt)("p",null,"\u5728StreamX\u4e2d,",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext")," \u662f Java API \u7f16\u5199 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvironment")," \u7c7b\u578b\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Table Sql")," \u4f5c\u4e1a\u7684\u5165\u53e3\u7c7b,",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext")," \u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u6709\u4e00\u4e2a\u662f\u4e13\u95e8\u4e3a Java API \u6253\u9020\u7684,\u8be5\u6784\u9020\u51fd\u6570\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"\n  /**\n   * for Java\n   *\n   * @param args\n   */\ndef this(args: StreamTableEnvConfig) = this(FlinkTableInitializer.initJavaStreamTable(args))\n")),(0,i.kt)("p",null,"\u7531\u4e0a\u9762\u7684\u6784\u9020\u65b9\u6cd5\u53ef\u4ee5\u770b\u5230\u521b\u5efa ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext")," ,\u9700\u8981\u4f20\u5165\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvConfig")," \u5bf9\u8c61,",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableEnvConfig")," \u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"class StreamTableEnvConfig (\n    val args: Array[String],\n    val streamConfig: StreamEnvConfigFunction, \n    val tableConfig: TableEnvConfigFunction\n)\n")),(0,i.kt)("p",null,"StreamTableEnvConfig \u7684\u6784\u9020\u65b9\u6cd5\u4e2d\u6709\u4e09\u4e2a\u53c2\u6570,\u5176\u4e2d"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"args")," \u4e3a\u542f\u52a8\u53c2\u6570,\u5fc5\u987b\u4e3a",(0,i.kt)("inlineCode",{parentName:"li"},"main"),"\u65b9\u6cd5\u91cc\u7684",(0,i.kt)("inlineCode",{parentName:"li"},"args")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"streamConfig")," \u4e3a",(0,i.kt)("inlineCode",{parentName:"li"},"StreamEnvConfigFunction"),"\u7c7b\u578b\u7684",(0,i.kt)("inlineCode",{parentName:"li"},"Function")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"tableConfig")," \u4e3a",(0,i.kt)("inlineCode",{parentName:"li"},"TableEnvConfigFunction"),"\u7c7b\u578b\u7684",(0,i.kt)("inlineCode",{parentName:"li"},"Function"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"StreamEnvConfigFunction"),"\u548c",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvConfigFunction")," \u5b9a\u4e49\u4e0a\u9762\u5df2\u7ecf\u8bb2\u8fc7,\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0"),(0,i.kt)("p",null,"\u8be5",(0,i.kt)("inlineCode",{parentName:"p"},"Function"),"\u7684\u4f5c\u7528\u662f\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u94a9\u5b50\u7684\u65b9\u5f0f\u8bbe\u7f6e\u66f4\u591a\u7684\u53c2\u6570,\u548c\u4e0a\u9762\u5176\u4ed6\u53c2\u6570\u8bbe\u7f6e\u4e0d\u540c\u7684\u662f,\u8be5",(0,i.kt)("inlineCode",{parentName:"p"},"Function"),"\u63d0\u4f9b\u4e86\u540c\u65f6\u8bbe\u7f6e",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment"),"\u548c",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment"),"\u7684\u673a\u4f1a ,\u4f1a\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"parameter"),"\u548c\u521d\u59cb\u5316\u597d\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment"),"\u548c",(0,i.kt)("inlineCode",{parentName:"p"},"TableEnvironment"),"\u4e2d\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"TableConfig"),"\u5bf9\u8c61\u4f20\u7ed9\u5f00\u53d1\u8005\u53bb\u5b8c\u6210\u66f4\u591a\u7684\u53c2\u6570\u8bbe\u7f6e,\u5982:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'\nStreamTableEnvConfig JavaConfig = new StreamTableEnvConfig(args, (environment, parameterTool) -> {\n    environment.getConfig().enableForceAvro();\n}, (tableConfig, parameterTool) -> {\n    tableConfig.setLocalTimeZone(ZoneId.of("Asia/Shanghai"));\n});\n\nStreamTableContext context = new StreamTableContext(JavaConfig);\n\n...\n')),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u7279\u522b\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamTableContext")," \u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment")," \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"API"),", ",(0,i.kt)("strong",{parentName:"p"},"\u4ee5$\u6253\u5934\u7684\u65b9\u6cd5")," \u90fd\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment")," \u7684 API"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("img",{src:a(4641).Z})))),(0,i.kt)("h2",{id:"\u751f\u547d\u5468\u671f"},"\u751f\u547d\u5468\u671f"),(0,i.kt)("p",null,"\u751f\u547d\u5468\u671f\u7684\u6982\u5ff5\u76ee\u524d\u53ea\u9488\u5bf9 ",(0,i.kt)("inlineCode",{parentName:"p"},"scala")," API,\u8be5\u751f\u547d\u5468\u671f\u660e\u786e\u7684\u5b9a\u4e49\u4e86\u6574\u4e2a\u4efb\u52a1\u8fd0\u884c\u7684\u5168\u8fc7\u7a0b ,\u4f46\u51e1\u7ee7\u627f\u81ea ",(0,i.kt)("inlineCode",{parentName:"p"},"FlinkStreaming")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"FlinkTable")," \u6216 ",(0,i.kt)("inlineCode",{parentName:"p"},"StreamingTable")," \u5c31\u4f1a\u6309\u8fd9\u4e2a\u751f\u547d\u5468\u671f\u6267\u884c,\u751f\u547d\u5468\u671f\u7684\u6838\u5fc3\u65b9\u6cd5\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-scala"},"\n final def main(args: Array[String]): Unit = {\n    init(args)\n    ready()\n    handle()\n    jobExecutionResult = context.start()\n    destroy()\n  }\n\n  private[this] def init(args: Array[String]): Unit = {\n    SystemPropertyUtils.setAppHome(KEY_APP_HOME, classOf[FlinkStreaming])\n    context = new StreamingContext(FlinkStreamingInitializer.initStream(args, config))\n  }\n\n  /**\n   * \u7528\u6237\u53ef\u8986\u76d6\u6b21\u65b9\u6cd5...\n   *\n   */\n  def ready(): Unit = {}\n\n  def config(env: StreamExecutionEnvironment, parameter: ParameterTool): Unit = {}\n\n  def handle(): Unit\n\n  def destroy(): Unit = {}\n  \n")),(0,i.kt)("p",null,"\u751f\u547d\u5468\u671f\u5982\u4e0b"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"init"),"          \u914d\u7f6e\u6587\u4ef6\u521d\u59cb\u5316\u9636\u6bb5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"config"),"        \u5f00\u53d1\u8005\u624b\u52a8\u8bbe\u7f6e\u53c2\u6570\u9636\u6bb5 "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"ready"),"         \u542f\u52a8\u4e4b\u524d\u6267\u884c\u81ea\u5b9a\u4e49\u52a8\u4f5c\u9636\u6bb5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"handle"),"        \u5f00\u53d1\u8005\u4ee3\u7801\u63a5\u5165\u9636\u6bb5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"start"),"         \u7a0b\u5e8f\u542f\u52a8\u9636\u6bb5"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"destroy"),"       \u9500\u6bc1\u9636\u6bb5")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Life Cycle",src:a(4092).Z})),(0,i.kt)("h3",{id:"\u751f\u547d\u5468\u671f\u4e4b--init"},"\u751f\u547d\u5468\u671f\u4e4b \u2014 init"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"init")," \u9636\u6bb5,\u6846\u67b6\u4f1a\u81ea\u52a8\u89e3\u6790\u4f20\u5165\u7684\u914d\u7f6e\u6587\u4ef6,\u6309\u7167\u91cc\u9762\u7684\u5b9a\u4e49\u7684\u5404\u79cd\u53c2\u6570\u521d\u59cb\u5316",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment"),",\u8fd9\u4e00\u6b65\u662f\u6846\u67b6\u81ea\u52a8\u6267\u884c,\u4e0d\u9700\u8981\u5f00\u53d1\u8005\u53c2\u4e0e"),(0,i.kt)("h3",{id:"\u751f\u547d\u5468\u671f\u4e4b--config"},"\u751f\u547d\u5468\u671f\u4e4b \u2014 config"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"config")," \u9636\u6bb5\u7684\u76ee\u7684\u662f\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u94a9\u5b50\u7684\u65b9\u5f0f\u8bbe\u7f6e\u66f4\u591a\u7684\u53c2\u6570(\u7ea6\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\u4ee5\u5916\u7684\u5176\u4ed6\u53c2\u6570),\u5728 ",(0,i.kt)("strong",{parentName:"p"},"config")," \u9636\u6bb5\u4f1a\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"parameter"),"(",(0,i.kt)("em",{parentName:"p"},"init")," \u9636\u6bb5\u89e3\u6790\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u6240\u6709\u7684\u53c2\u6570)\u548c",(0,i.kt)("em",{parentName:"p"},"init")," \u9636\u6bb5\u521d\u59cb\u5316\u597d\u7684",(0,i.kt)("inlineCode",{parentName:"p"},"StreamExecutionEnvironment"),"\u5bf9\u8c61\u4f20\u7ed9\u5f00\u53d1\u8005,\n\u8fd9\u6837\u5f00\u53d1\u8005\u5c31\u53ef\u4ee5\u914d\u7f6e\u66f4\u591a\u7684\u53c2\u6570"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u8bf4\u660e")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"config")," \u9636\u6bb5\u662f\u9700\u8981\u5f00\u53d1\u8005\u53c2\u4e0e\u7684\u9636\u6bb5,\u662f\u53ef\u9009\u7684\u9636\u6bb5"))),(0,i.kt)("h3",{id:"\u751f\u547d\u5468\u671f\u4e4b--ready"},"\u751f\u547d\u5468\u671f\u4e4b \u2014 ready"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"ready")," \u9636\u6bb5\u662f\u5728\u53c2\u6570\u90fd\u8bbe\u7f6e\u5b8c\u6bd5\u4e86,\u7ed9\u5f00\u53d1\u8005\u63d0\u4f9b\u7684\u4e00\u4e2a\u7528\u4e8e\u505a\u5176\u4ed6\u52a8\u4f5c\u7684\u5165\u53e3, \u8be5\u9636\u6bb5\u662f\u5728",(0,i.kt)("strong",{parentName:"p"},"\u521d\u59cb\u5316\u5b8c\u6210\u4e4b\u540e"),"\u5728",(0,i.kt)("strong",{parentName:"p"},"\u7a0b\u5e8f\u542f\u52a8\u4e4b\u524d"),"\u8fdb\u884c"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u8bf4\u660e")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"ready")," \u9636\u6bb5\u662f\u9700\u8981\u5f00\u53d1\u8005\u53c2\u4e0e\u7684\u9636\u6bb5,\u662f\u53ef\u9009\u7684\u9636\u6bb5"))),(0,i.kt)("h3",{id:"\u751f\u547d\u5468\u671f\u4e4b--handle"},"\u751f\u547d\u5468\u671f\u4e4b \u2014 handle"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"handle")," \u9636\u6bb5\u662f\u63a5\u5165\u5f00\u53d1\u8005\u7f16\u5199\u7684\u4ee3\u7801\u7684\u9636\u6bb5,\u662f\u5f00\u53d1\u8005\u7f16\u5199\u4ee3\u7801\u7684\u5165\u53e3,\u4e5f\u662f\u6700\u91cd\u8981\u7684\u4e00\u4e2a\u9636\u6bb5, \u8fd9\u4e2a",(0,i.kt)("inlineCode",{parentName:"p"},"handle")," \u65b9\u6cd5\u4f1a\u5f3a\u5236\u8ba9\u5f00\u53d1\u8005\u53bb\u5b9e\u73b0"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u8bf4\u660e")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"handle")," \u9636\u6bb5\u662f\u9700\u8981\u5f00\u53d1\u8005\u53c2\u4e0e\u7684\u9636\u6bb5,\u662f\u5fc5\u987b\u7684\u9636\u6bb5"))),(0,i.kt)("h3",{id:"\u751f\u547d\u5468\u671f\u4e4b--start"},"\u751f\u547d\u5468\u671f\u4e4b \u2014 start"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"start")," \u9636\u6bb5,\u987e\u540d\u601d\u4e49,\u8fd9\u4e2a\u9636\u6bb5\u4f1a\u542f\u52a8\u4efb\u52a1,\u7531\u6846\u67b6\u81ea\u52a8\u6267\u884c"),(0,i.kt)("h3",{id:"\u751f\u547d\u5468\u671f\u4e4b--destroy"},"\u751f\u547d\u5468\u671f\u4e4b \u2014 destroy"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"destroy")," \u9636\u6bb5,\u662f\u7a0b\u5e8f\u8fd0\u884c\u5b8c\u6bd5\u4e86,\u5728jvm\u9000\u51fa\u4e4b\u524d\u7684\u6700\u540e\u4e00\u4e2a\u9636\u6bb5,\u4e00\u822c\u7528\u4e8e\u6536\u5c3e\u7684\u5de5\u4f5c"),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"\u8bf4\u660e")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"destroy")," \u9636\u6bb5\u662f\u9700\u8981\u5f00\u53d1\u8005\u53c2\u4e0e\u7684\u9636\u6bb5,\u662f\u53ef\u9009\u7684\u9636\u6bb5"))),(0,i.kt)("h2",{id:"\u76ee\u5f55\u7ed3\u6784"},"\u76ee\u5f55\u7ed3\u6784"),(0,i.kt)("p",null,"\u63a8\u8350\u7684\u9879\u76ee\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b,\u5177\u4f53\u53ef\u4ee5\u53c2\u8003",(0,i.kt)("a",{parentName:"p",href:"https://github.com/streamxhub/streamx/streamx-flink/streamx-flink-quickstart"},"Streamx-flink-quickstart")," \u91cc\u7684\u76ee\u5f55\u7ed3\u6784\u548c\u914d\u7f6e"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tree"},".\n|\u2500\u2500 assembly\n\u2502    \u251c\u2500\u2500 bin\n\u2502    \u2502    \u251c\u2500\u2500 startup.sh                             //\u542f\u52a8\u811a\u672c  \n\u2502    \u2502    \u251c\u2500\u2500 setclasspath.sh                        //Java\u73af\u5883\u53d8\u91cf\u76f8\u5173\u7684\u811a\u672c(\u6846\u67b6\u5185\u90e8\u4f7f\u7528,\u5f00\u53d1\u8005\u65e0\u9700\u5173\u6ce8)\n\u2502    \u2502    \u251c\u2500\u2500 shutdown.sh                            //\u4efb\u52a1\u505c\u6b62\u811a\u672c(\u4e0d\u5efa\u8bae\u4f7f\u7528)\n\u2502    \u2502    \u2514\u2500\u2500 flink.sh                               //\u542f\u52a8\u65f6\u5185\u90e8\u4f7f\u7528\u5230\u7684\u811a\u672c(\u6846\u67b6\u5185\u90e8\u4f7f\u7528,\u5f00\u53d1\u8005\u65e0\u9700\u5173\u6ce8)\n\u2502    \u2502\u2500\u2500 conf                           \n\u2502    \u2502    \u251c\u2500\u2500 test\n\u2502    \u2502    \u2502    \u251c\u2500\u2500 application.yaml                  //\u6d4b\u8bd5(test)\u9636\u6bb5\u7684\u914d\u7f6e\u6587\u4ef6\n\u2502    \u2502    \u2502    \u2514\u2500\u2500 sql.yaml                          //flink sql\n\u2502    \u2502    \u2502\n\u2502    \u2502    \u251c\u2500\u2500 prod                      \n\u2502    \u2502    \u2502    \u251c\u2500\u2500 application.yaml                  //\u751f\u4ea7(prod)\u9636\u6bb5\u7684\u914d\u7f6e\u6587\u4ef6\n\u2502    \u2502    \u2502    \u2514\u2500\u2500 sql.yaml                          //flink sql\n\u2502    \u2502\u2500\u2500 logs                                        //logs\u76ee\u5f55\n\u2502    \u2514\u2500\u2500 temp\n\u2502\n\u2502\u2500\u2500 src\n\u2502    \u2514\u2500\u2500 main\n\u2502         \u251c\u2500\u2500 Java \n\u2502         \u251c\u2500\u2500 resources\n\u2502         \u2514\u2500\u2500 scala \n\u2502\n\u2502\u2500\u2500 assembly.xml\n\u2502\n\u2514\u2500\u2500 pom.xml\n")),(0,i.kt)("p",null,"assembly.xml \u662fassembly\u6253\u5305\u63d2\u4ef6\u9700\u8981\u7528\u5230\u7684\u914d\u7f6e\u6587\u4ef6,\u5b9a\u4e49\u5982\u4e0b:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<assembly>\n    <id>bin</id>\n    <formats>\n        <format>tar.gz</format>\n    </formats>\n    <fileSets>\n        <fileSet>\n            <directory>assembly/bin</directory>\n            <outputDirectory>bin</outputDirectory>\n            <fileMode>0755</fileMode>\n        </fileSet>\n        <fileSet>\n            <directory>${project.build.directory}</directory>\n            <outputDirectory>lib</outputDirectory>\n            <fileMode>0755</fileMode>\n            <includes>\n                <include>*.jar</include>\n            </includes>\n            <excludes>\n                <exclude>original-*.jar</exclude>\n            </excludes>\n        </fileSet>\n        <fileSet>\n            <directory>assembly/conf</directory>\n            <outputDirectory>conf</outputDirectory>\n            <fileMode>0755</fileMode>\n        </fileSet>\n        <fileSet>\n            <directory>assembly/logs</directory>\n            <outputDirectory>logs</outputDirectory>\n            <fileMode>0755</fileMode>\n        </fileSet>\n        <fileSet>\n            <directory>assembly/temp</directory>\n            <outputDirectory>temp</outputDirectory>\n            <fileMode>0755</fileMode>\n        </fileSet>\n    </fileSets>\n</assembly>\n")),(0,i.kt)("h2",{id:"\u6253\u5305\u90e8\u7f72"},"\u6253\u5305\u90e8\u7f72"),(0,i.kt)("p",null,"\u63a8\u8350 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/streamxhub/streamx/streamx-flink/streamx-flink-quickstart"},"streamx-flink-quickstart")," \u91cc\u7684\u6253\u5305\u6a21\u5f0f,\u76f4\u63a5\u8fd0\u884c",(0,i.kt)("inlineCode",{parentName:"p"},"maven package"),"\u5373\u53ef\u751f\u6210\u4e00\u4e2a\u6807\u51c6\u7684StreamX\u63a8\u8350\u7684\u9879\u76ee\u5305,\u89e3\u5305\u540e\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},".\nStreamx-flink-quickstart-1.0.0\n\u251c\u2500\u2500 bin\n\u2502   \u251c\u2500\u2500 startup.sh                             //\u542f\u52a8\u811a\u672c  \n\u2502   \u251c\u2500\u2500 setclasspath.sh                        //Java\u73af\u5883\u53d8\u91cf\u76f8\u5173\u7684\u811a\u672c(\u5185\u90e8\u4f7f\u7528\u7684,\u7528\u6237\u65e0\u9700\u5173\u6ce8)\n\u2502   \u251c\u2500\u2500 shutdown.sh                            //\u4efb\u52a1\u505c\u6b62\u811a\u672c(\u4e0d\u5efa\u8bae\u4f7f\u7528)\n\u2502   \u251c\u2500\u2500 flink.sh                               //\u542f\u52a8\u65f6\u5185\u90e8\u4f7f\u7528\u5230\u7684\u811a\u672c(\u5185\u90e8\u4f7f\u7528\u7684,\u7528\u6237\u65e0\u9700\u5173\u6ce8)\n\u251c\u2500\u2500 conf                           \n\u2502   \u251c\u2500\u2500 application.yaml                       //\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 sql.yaml                               // flink sql\u6587\u4ef6\n\u251c\u2500\u2500 lib\n\u2502   \u2514\u2500\u2500 Streamx-flink-quickstart-1.0.0.jar     //\u9879\u76ee\u7684jar\u5305\n\u2514\u2500\u2500 temp\n")),(0,i.kt)("h2",{id:"\u542f\u52a8\u547d\u4ee4"},"\u542f\u52a8\u547d\u4ee4"),(0,i.kt)("p",null,"\u542f\u52a8\u4e4b\u524d\u786e\u5b9aapplication.yaml\u548c sql.yaml \u914d\u7f6e\u6587\u4ef6,\u5982\u679c\u8981\u542f\u52a8\u7684\u4efb\u52a1\u662f",(0,i.kt)("inlineCode",{parentName:"p"},"DataStream"),"\u4efb\u52a1,\u76f4\u63a5\u5728startup.sh\u540e\u8ddf\u4e0a\u914d\u7f6e\u6587\u4ef6\u5373\u53ef"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"bin/startup.sh --conf conf/application.yaml\n")),(0,i.kt)("p",null,"\u5982\u679c\u8981\u542f\u52a8\u7684\u4efb\u52a1\u662f",(0,i.kt)("inlineCode",{parentName:"p"},"Flink Sql"),"\u4efb\u52a1,\u5219\u9700\u8981\u8ddf\u4e0a\u914d\u7f6e\u6587\u4ef6\u548csql.yaml"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"bin/startup.sh --conf conf/application.yaml --sql conf/sql.yaml\n")))}u.isMDXComponent=!0},4641:function(e,n,a){n.Z=a.p+"assets/images/streamx_apis-574b985bc649f26aacf875ccd0155793.jpeg"},4092:function(e,n,a){n.Z=a.p+"assets/images/streamx_scala_life_cycle-7bfdf4f1228b36f59fae79943d5c8108.png"}}]);